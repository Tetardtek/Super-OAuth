<div class="content-section">
        <h1>üõ†Ô∏è Scripts d'automatisation & outils</h1>
        <p>Cette page regroupe la documentation compl√®te sur les scripts d‚Äôautomatisation et outils fournis avec SuperOAuth. Utilisez-les pour optimiser, analyser et maintenir votre projet efficacement.</p>

        <h2>analyze-bundle-size.js</h2>
        <p>Analyse la taille des bundles, minifie, g√©n√®re des rapports d√©taill√©s et recommandations pour optimiser le poids de vos assets.<br>
        <b>CLI robuste avec commander.js</b>.<br>
        Tous les logs sont centralis√©s dans <code>logs/analyze-bundle-size.log</code> (ou personnalisable via <code>--log</code>).</p>
        <table class="script-table">
            <thead>
                <tr><th>Commande exemple</th><th>Utilit√© principale</th><th>Sortie/Rapport</th></tr>
            </thead>
            <tbody>
                <tr><td><code>node scripts/analyze-bundle-size.js --report html</code></td><td>Audit taille bundles, rapport HTML</td><td>bundle-analysis.html, logs/analyze-bundle-size.log</td></tr>
                <tr><td><code>node scripts/analyze-bundle-size.js --report json</code></td><td>Audit taille bundles, rapport JSON</td><td>bundle-analysis.json, logs/analyze-bundle-size.log</td></tr>
                <tr><td><code>node scripts/analyze-bundle-size.js --report all</code></td><td>Audit complet (HTML + JSON)</td><td>bundle-analysis.html, .json, logs/analyze-bundle-size.log</td></tr>
                <tr><td><code>node scripts/analyze-bundle-size.js --report html --log logs/mon-analyse.log</code></td><td>Audit avec log personnalis√©</td><td>bundle-analysis.html, logs/mon-analyse.log</td></tr>
            </tbody>
        </table>
        <div class="script-doc-details">
            <h3>√Ä quoi sert ce script&nbsp;?</h3>
            <p>Ce script analyse la taille de tous vos bundles JS/CSS/HTML, d√©tecte les assets trop volumineux, g√©n√®re des rapports d√©taill√©s (HTML, JSON) et propose des recommandations d‚Äôoptimisation. Il permet de surveiller l‚Äô√©volution du poids de vos assets √† chaque build et d‚Äôanticiper les r√©gressions de performance.</p>
            <h3>Exemples d'utilisation avanc√©e</h3>
            <ul>
                <li><code>node scripts/analyze-bundle-size.js --report html --log logs/mon-analyse.log</code> : Audit HTML avec log personnalis√©</li>
                <li><code>node scripts/analyze-bundle-size.js --report all --dry-run</code> : Simulation d‚Äôun audit complet sans g√©n√©rer de rapport</li>
                <li><code>node scripts/analyze-bundle-size.js --report json --log logs/poids.log</code> : Audit JSON avec log d√©di√©</li>
            </ul>
            <h3>Exemple de log g√©n√©r√©</h3>
            <pre><code>[2025-07-23T17:40:00.123Z] üì¶ Audit des bundles d√©marr√©
[2025-07-23T17:40:01.456Z] - Analyse de dist/app.bundle.js : 1.2Mo
[2025-07-23T17:40:02.789Z] ‚ö†Ô∏è Alerte : core.bundle.js > 2Mo
[2025-07-23T17:40:03.000Z] ‚úÖ Rapport g√©n√©r√© : bundle-analysis.html
            </code></pre>
            <h3>Erreurs courantes</h3>
            <ul>
                <li><b>Fichier bundle introuvable :</b> V√©rifiez le chemin des assets √† auditer (ex: <code>dist/</code> absent apr√®s build).</li>
                <li><b>Permission refus√©e sur logs/ :</b> Assurez-vous que le dossier <code>logs/</code> existe et est accessible en √©criture.</li>
                <li><b>Option inconnue :</b> Utilisez <code>--help</code> pour la liste compl√®te des options CLI.</li>
                <li><b>Rapport vide :</b> Aucun bundle d√©tect√©, v√©rifiez la configuration du build.</li>
            </ul>
            <h3>Bonnes pratiques & conseils</h3>
            <ul>
                <li>Automatisez l‚Äôaudit apr√®s chaque build de production (CI/CD).</li>
                <li>Fixez des seuils de taille critique pour vos bundles et surveillez les alertes dans les logs.</li>
                <li>Utilisez <code>--dry-run</code> pour tester la configuration sans g√©n√©rer de rapport.</li>
                <li>Consultez les recommandations d‚Äôoptimisation dans le rapport HTML.</li>
                <li>En cas de probl√®me, lancez <code>optimize-bundles.js</code> pour corriger les assets trop volumineux.</li>
            </ul>
        </div>

        <h2>optimize-bundles.js</h2>
        <p>Optimise et minifie tous les assets JS, CSS, HTML et images pour la production, afin d‚Äôam√©liorer les performances du projet.<br>
        <b>CLI robuste avec commander.js</b>.<br>
        Tous les logs sont centralis√©s dans <code>logs/optimize-bundles.log</code> (ou personnalisable via <code>--log</code>).</p>
        <table class="script-table">
            <thead>
                <tr><th>Commande exemple</th><th>Utilit√© principale</th><th>Sortie/Rapport</th></tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>node scripts/optimize-bundles.js</code></td>
                    <td>Optimisation/minification de tous les assets</td>
                    <td>/dist, manifest.json, logs/optimize-bundles.log</td>
                </tr>
                <tr>
                    <td><code>node scripts/optimize-bundles.js --include core,app</code></td>
                    <td>Optimiser uniquement certains bundles</td>
                    <td>/dist/core.bundle.js, /dist/app.bundle.js, logs/optimize-bundles.log</td>
                </tr>
                <tr>
                    <td><code>node scripts/optimize-bundles.js --exclude vendor,legacy</code></td>
                    <td>Ignorer certains bundles lors de l‚Äôoptimisation</td>
                    <td>/dist (hors vendor.bundle.js, legacy.bundle.js), logs/optimize-bundles.log</td>
                </tr>
                <tr>
                    <td><code>node scripts/optimize-bundles.js --log logs/mon-optim.log</code></td>
                    <td>Optimisation avec log personnalis√©</td>
                    <td>/dist, manifest.json, logs/mon-optim.log</td>
                </tr>
            </tbody>
        </table>
        <div class="script-doc-details">
            <h3>√Ä quoi sert ce script&nbsp;?</h3>
            <p>Ce script automatise la minification, la compression et l‚Äôoptimisation de tous les fichiers de production (JS, CSS, HTML, images). Il r√©duit le temps de chargement, am√©liore le score Lighthouse, et pr√©pare le projet pour la mise en ligne.</p>
            <h3>Exemples d'utilisation avanc√©e</h3>
            <ul>
                <li><code>node scripts/optimize-bundles.js --include core,app --log logs/optim-core.log</code> : Optimiser uniquement certains bundles avec log d√©di√©</li>
                <li><code>node scripts/optimize-bundles.js --exclude vendor,legacy --dry-run</code> : Simulation d‚Äôoptimisation sans modification</li>
                <li><code>node scripts/optimize-bundles.js --log logs/optim-prod.log</code> : Log personnalis√© pour suivi CI/CD</li>
            </ul>
            <h3>Exemple de log g√©n√©r√©</h3>
            <pre><code>[2025-07-23T17:42:00.123Z] üöÄ Optimisation d√©marr√©e
[2025-07-23T17:42:01.456Z] - core.bundle.js minifi√© (1.2Mo ‚Üí 800Ko)
[2025-07-23T17:42:02.789Z] ‚úÖ Optimisation termin√©e
            </code></pre>
            <h3>Erreurs courantes</h3>
            <ul>
                <li><b>Fichier introuvable :</b> V√©rifiez les chemins des bundles √† optimiser (ex: <code>dist/</code> absent).</li>
                <li><b>Permission refus√©e sur logs/ :</b> Assurez-vous que le dossier <code>logs/</code> existe et est accessible en √©criture.</li>
                <li><b>Option inconnue :</b> Utilisez <code>--help</code> pour la liste compl√®te des options CLI.</li>
                <li><b>Optimisation incompl√®te :</b> Certains fichiers n‚Äôont pas pu √™tre trait√©s (voir log pour d√©tails).</li>
            </ul>
            <h3>Bonnes pratiques & conseils</h3>
            <ul>
                <li>Automatisez l‚Äôoptimisation apr√®s chaque build de production.</li>
                <li>V√©rifiez le r√©sultat dans <code>/dist</code> et comparez la taille avant/apr√®s dans les logs.</li>
                <li>Utilisez <code>--dry-run</code> pour valider la configuration sans modifier les fichiers.</li>
                <li>Apr√®s optimisation, relancez <code>analyze-bundle-size.js</code> pour v√©rifier l‚Äôimpact sur le poids des assets.</li>
                <li>Consultez les logs pour d√©tecter les fichiers non optimis√©s ou probl√©matiques.</li>
            </ul>
        </div>

        <h2>generate-test-report.js</h2>
        <p>G√©n√®re un rapport synth√©tique sur les tests backend et frontend, avec plusieurs formats de sortie pour faciliter l‚Äôanalyse.</p>
        <table class="script-table">
            <thead>
                <tr><th>Commande exemple</th><th>Utilit√© principale</th><th>Sortie/Rapport</th></tr>
            </thead>
            <tbody>
                <tr><td><code>node scripts/generate-test-report.js --report html|json|txt</code></td><td>Rapport synth√®se des tests</td><td>test-report.html, .json, .txt</td></tr>
            </tbody>
        </table>
        <div class="script-doc-details">
            <h3>Exemples d'utilisation avanc√©e</h3>
            <ul>
                <li><code>node scripts/generate-test-report.js --report html</code> : Rapport synth√®se des tests (HTML)</li>
                <li><code>node scripts/generate-test-report.js --report json</code> : Rapport synth√®se des tests (JSON)</li>
                <li><code>node scripts/generate-test-report.js --report txt</code> : Rapport synth√®se des tests (texte)</li>
                <li><code>node scripts/generate-test-report.js --log logs/mon-test.log</code> : Rapport avec log personnalis√©</li>
                <li><code>node scripts/generate-test-report.js --no-run</code> : G√©n√®re le rapport √† partir des fichiers existants (sans relancer les tests)</li>
                <li><code>node scripts/generate-test-report.js --dry-run</code> : Affiche les actions sans g√©n√©rer de rapport</li>
            </ul>
            <h3>Exemple de log g√©n√©r√©</h3>
            <pre><code>[2025-07-23T17:28:50.676Z] üìà G√©n√©ration du rapport de couverture...
[2025-07-23T17:28:54.770Z] ‚úÖ Rapport g√©n√©r√© : logs/TESTS_REPORT.md
[2025-07-23T17:28:54.772Z] - Backend : 32/32 r√©ussis
[2025-07-23T17:28:54.773Z] - Frontend : 66/66 r√©ussis
[2025-07-23T17:28:54.774Z] - logs/TESTS_REPORT.md (ce rapport)
[2025-07-23T17:28:54.775Z] - coverage/index.html (si couverture g√©n√©r√©e)
            </code></pre>
            <h3>Erreurs courantes</h3>
            <ul>
                <li><b>Tests non trouv√©s :</b> V√©rifiez la configuration Jest/Vitest et la pr√©sence des fichiers de test.</li>
                <li><b>Probl√®me de permission sur logs/ :</b> Assurez-vous que le dossier <code>logs/</code> existe et est accessible en √©criture.</li>
                <li><b>Option inconnue :</b> Utilisez <code>--help</code> pour la liste compl√®te des options CLI.</li>
            </ul>
            <h3>Bonnes pratiques</h3>
            <ul>
                <li>G√©n√©rez toujours le rapport dans <code>logs/</code> pour centraliser les r√©sultats.</li>
                <li>Utilisez <code>--no-run</code> pour reg√©n√©rer un rapport √† partir de tests d√©j√† ex√©cut√©s.</li>
                <li>Consultez <code>logs/generate-test-report.log</code> pour le d√©tail des ex√©cutions et diagnostics.</li>
            </ul>
        </div>

        <h2>reset-database.js</h2>
        <p>R√©initialise la base de donn√©es (‚ö†Ô∏è destructif). Utilise <b>commander.js</b> pour une CLI robuste. Peut cibler certaines tables, simuler l‚Äôop√©ration avec <code>--dry-run</code> (aucune donn√©e supprim√©e), et journaliser toutes les actions/erreurs SQL dans un fichier du dossier <code>logs/</code> (par d√©faut <code>logs/reset-database.log</code>, ou personnalis√© via <code>--log</code>).</p>
        <table class="script-table">
            <thead>
                <tr><th>Commande exemple</th><th>Utilit√© principale</th><th>Sortie/Rapport</th></tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>node scripts/reset-database.js --confirm</code></td>
                    <td>R√©initialisation compl√®te (toutes les tables, sans confirmation interactive)</td>
                    <td>console</td>
                </tr>
                <tr>
                    <td><code>node scripts/reset-database.js --tables users --confirm</code></td>
                    <td>R√©initialiser uniquement la table <code>users</code> (sans confirmation interactive)</td>
                    <td>console</td>
                </tr>
                <tr>
                    <td><code>node scripts/reset-database.js --tables users,sessions --confirm</code></td>
                    <td>R√©initialiser uniquement <code>users</code> et <code>sessions</code> (sans confirmation interactive)</td>
                    <td>console</td>
                </tr>
                <tr>
                    <td><code>node scripts/reset-database.js --dry-run --tables users --confirm</code></td>
                    <td>Simulation (aucune suppression r√©elle, affiche la suppression simul√©e de <code>users</code>)</td>
                    <td>console</td>
                </tr>
                <tr>
                    <td><code>node scripts/reset-database.js --dry-run --confirm</code></td>
                    <td>Simulation (aucune suppression r√©elle, affiche la suppression simul√©e de toutes les tables)</td>
                    <td>console</td>
                </tr>
                <tr>
                    <td><code>node scripts/reset-database.js --tables users --log reset.log --confirm</code></td>
                    <td>R√©initialiser uniquement <code>users</code> et journaliser toutes les actions/erreurs dans <code>reset.log</code></td>
                    <td>console + reset.log</td>
                </tr>
                <tr>
                    <td><code>node scripts/reset-database.js --dry-run --tables users --log reset.log --confirm</code></td>
                    <td>Simulation de la suppression de <code>users</code> avec journalisation dans <code>reset.log</code></td>
                    <td>console + reset.log</td>
                </tr>
            </tbody>
        </table>
        <div class="script-doc-details">
            <h3>Exemples d'utilisation avanc√©e</h3>
            <ul>
                <li><code>node scripts/reset-database.js --confirm</code> : R√©initialisation compl√®te sans confirmation interactive</li>
                <li><code>node scripts/reset-database.js --tables users --confirm</code> : R√©initialiser uniquement la table <code>users</code></li>
                <li><code>node scripts/reset-database.js --tables users,sessions --confirm</code> : R√©initialiser <code>users</code> et <code>sessions</code></li>
                <li><code>node scripts/reset-database.js --dry-run --tables users --confirm</code> : Simulation de la suppression de <code>users</code> (aucune donn√©e supprim√©e)</li>
                <li><code>node scripts/reset-database.js --log logs/mon-reset.log --confirm</code> : R√©initialisation avec log personnalis√©</li>
            </ul>
            <h3>Exemple de log g√©n√©r√©</h3>
            <pre><code>[2025-07-23T17:35:10.123Z] ‚ö†Ô∏è R√©initialisation de la base demand√©e
[2025-07-23T17:35:10.456Z] - Suppression de la table users...
[2025-07-23T17:35:10.789Z] ‚úÖ Table users supprim√©e
[2025-07-23T17:35:11.001Z] ‚úÖ R√©initialisation termin√©e
            </code></pre>
            <h3>Erreurs courantes</h3>
            <ul>
                <li><b>Permission refus√©e sur logs/ :</b> V√©rifiez que le dossier <code>logs/</code> existe et est accessible en √©criture.</li>
                <li><b>Table inconnue :</b> V√©rifiez le nom des tables pass√©es √† <code>--tables</code>.</li>
                <li><b>Option inconnue :</b> Utilisez <code>--help</code> pour la liste compl√®te des options CLI.</li>
                <li><b>Confirmation manquante :</b> L‚Äôoption <code>--confirm</code> est obligatoire pour toute suppression.</li>
            </ul>
            <h3>Bonnes pratiques</h3>
            <ul>
                <li>Utilisez toujours <code>--dry-run</code> pour simuler avant toute suppression r√©elle.</li>
                <li>Centralisez les logs dans <code>logs/reset-database.log</code> ou un fichier d√©di√©.</li>
                <li>Ne jamais ex√©cuter ce script en production sans sauvegarde pr√©alable.</li>
                <li>V√©rifiez la liste des tables cibl√©es avant validation.</li>
            </ul>
        </div>

        <div class="alert alert-warning" style="margin-top:1em;">
            <b>üìù Astuce :</b> Tous les logs des scripts sont centralis√©s dans le dossier <code>logs/</code> √† la racine du projet.<br>
            Par d√©faut, <b>analyze-bundle-size.js</b> √©crit dans <code>logs/analyze-bundle-size.log</code>.<br>
            Utilisez <code>--log logs/mon-analyse.log</code> pour personnaliser le fichier log.<br>
