<h2 aria-label="Architecture Modulaire" tabindex="0">ğŸ—ï¸ Architecture Modulaire</h2>

<h3 aria-label="Vue d'ensemble" tabindex="0">ğŸ“‹ Vue d'ensemble</h3>
<p>SuperOAuth a Ã©tÃ© conÃ§u avec une architecture modulaire pour maximiser la <strong>maintenabilitÃ©</strong>, la <strong>rÃ©utilisabilitÃ©</strong> et la <strong>portabilitÃ©</strong>.</p>

<div class="architecture-diagram">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>
â”‚   UI Events     â”‚â”€â”€â”€â–¶â”‚   Components     â”‚â”€â”€â”€â–¶â”‚   AuthService   â”‚<br>
â”‚                 â”‚    â”‚                  â”‚    â”‚                 â”‚<br>
â”‚ â€¢ Click         â”‚    â”‚ â€¢ AuthComponent  â”‚    â”‚ â€¢ API Calls     â”‚<br>
â”‚ â€¢ Input         â”‚    â”‚ â€¢ Dashboard      â”‚    â”‚ â€¢ Token Mgmt    â”‚<br>
â”‚ â€¢ Focus         â”‚    â”‚ â€¢ ServerMonitor  â”‚    â”‚ â€¢ State Mgmt    â”‚<br>
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>
                                 â”‚                        â”‚<br>
                                 â–¼                        â–¼<br>
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>
â”‚   UI Updates    â”‚â—€â”€â”€â”€â”‚    Utils         â”‚â—€â”€â”€â”€â”‚   API Server    â”‚<br>
â”‚                 â”‚    â”‚                  â”‚    â”‚                 â”‚<br>
â”‚ â€¢ DOM Manip     â”‚    â”‚ â€¢ Storage        â”‚    â”‚ â€¢ /auth/*       â”‚<br>
â”‚ â€¢ Feedback      â”‚    â”‚ â€¢ Validation     â”‚    â”‚ â€¢ /health       â”‚<br>
â”‚ â€¢ State         â”‚    â”‚ â€¢ HTTP Helpers   â”‚    â”‚ â€¢ OAuth         â”‚<br>
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div>

<h3 aria-label="Architecture Backend" tabindex="0">ğŸ—ï¸ Architecture Backend (Clean Architecture)</h3>
<p>SuperOAuth suit une <strong>architecture hexagonale</strong> (Clean Architecture) cÃ´tÃ© backend avec une sÃ©paration claire des responsabilitÃ©s :</p>

<div class="file-tree">
<strong>src/</strong> - Architecture Backend TypeScript<br>
â”œâ”€â”€ <strong>main.ts</strong>                   # Point d'entrÃ©e de l'application<br>
â”œâ”€â”€ <strong>domain/</strong>                   # ğŸ¯ CÅ“ur MÃ©tier (indÃ©pendant)<br>
â”‚   â”œâ”€â”€ entities/               # EntitÃ©s mÃ©tier (User, Session, etc.)<br>
â”‚   â”œâ”€â”€ value-objects/          # Objets de valeur (Email, Password, etc.)<br>
â”‚   â”œâ”€â”€ repositories/           # Interfaces repositories (contrats)<br>
â”‚   â””â”€â”€ errors/                 # Erreurs mÃ©tier spÃ©cifiques<br>
â”œâ”€â”€ <strong>application/</strong>               # ğŸ§  Logique Applicative<br>
â”‚   â”œâ”€â”€ use-cases/              # Cas d'usage (RegisterUser, LoginUser, etc.)<br>
â”‚   â”œâ”€â”€ services/               # Services applicatifs<br>
â”‚   â”œâ”€â”€ dto/                    # Data Transfer Objects<br>
â”‚   â”œâ”€â”€ interfaces/             # Contrats applicatifs<br>
â”‚   â””â”€â”€ index.ts                # Point d'entrÃ©e du module<br>
â”œâ”€â”€ <strong>infrastructure/</strong>            # ğŸ”§ Couche Infrastructure<br>
â”‚   â”œâ”€â”€ database/               # Configuration TypeORM & entitÃ©s<br>
â”‚   â”œâ”€â”€ oauth/                  # Services OAuth (Discord, Google, etc.)<br>
â”‚   â”œâ”€â”€ services/               # ImplÃ©mentations concrÃ¨tes<br>
â”‚   â””â”€â”€ di/                     # Injection de dÃ©pendances<br>
â”œâ”€â”€ <strong>presentation/</strong>              # ğŸŒ Interface HTTP (API REST)<br>
â”‚   â”œâ”€â”€ controllers/            # ContrÃ´leurs REST<br>
â”‚   â”œâ”€â”€ routes/                 # DÃ©finition des routes Express<br>
â”‚   â”œâ”€â”€ middleware/             # Middlewares (auth, validation, etc.)<br>
â”‚   â”œâ”€â”€ validators/             # Validateurs de donnÃ©es<br>
â”‚   â”œâ”€â”€ types/                  # Types TypeScript<br>
â”‚   â””â”€â”€ index.ts                # Configuration routes<br>
â””â”€â”€ <strong>shared/</strong>                   # ğŸ¤ Ã‰lÃ©ments PartagÃ©s<br>
    â”œâ”€â”€ config/                 # Configuration (database, auth, etc.)<br>
    â”œâ”€â”€ constants/              # Constantes globales<br>
    â”œâ”€â”€ utils/                  # Utilitaires (logger, crypto, etc.)<br>
    â”œâ”€â”€ middleware/             # Middlewares globaux<br>
    â””â”€â”€ types/                  # Types TypeScript partagÃ©s
</div>

<div class="component-card">
    <h4>ğŸ¯ Avantages de l'Architecture Hexagonale</h4>
    <ul>
        <li><strong>Domain indÃ©pendant</strong> : Le cÅ“ur mÃ©tier ne dÃ©pend d'aucune technologie</li>
        <li><strong>TestabilitÃ© Ã©levÃ©e</strong> : Chaque couche testable indÃ©pendamment</li>
        <li><strong>FlexibilitÃ©</strong> : Changement de DB/framework sans impact mÃ©tier</li>
        <li><strong>Ã‰volutivitÃ©</strong> : Ajout facile de nouvelles fonctionnalitÃ©s</li>
    </ul>
</div>

<h3 aria-label="Structure Frontend" tabindex="0">ğŸ“ Structure Frontend</h3>
<div class="file-tree">
public/<br>
â”œâ”€â”€ index.html                  # Interface HTML modulaire<br>
â”œâ”€â”€ css/                        # Styles sÃ©parÃ©s<br>
â”‚   â”œâ”€â”€ main.css               # Styles principaux et layout<br>
â”‚   â”œâ”€â”€ components.css         # Styles des composants UI<br>
â”‚   â””â”€â”€ dashboard.css          # Styles spÃ©cifiques au dashboard<br>
â”œâ”€â”€ js/                        # Logique JavaScript modulaire<br>
â”‚   â”œâ”€â”€ config.js              # Configuration et constantes<br>
â”‚   â”œâ”€â”€ utils.js               # Utilitaires et helpers<br>
â”‚   â”œâ”€â”€ auth-service.js        # Service d'authentification<br>
â”‚   â”œâ”€â”€ auth-component.js      # Composant d'interface auth<br>
â”‚   â”œâ”€â”€ dashboard-component.js # Composant dashboard<br>
â”‚   â”œâ”€â”€ server-monitor.js      # Monitoring du serveur<br>
â”‚   â””â”€â”€ app.js                 # Application principale<br>
â”œâ”€â”€ docs/                      # Documentation modulaire<br>
â”‚   â”œâ”€â”€ index.html             # Page principale de documentation<br>
â”‚   â”œâ”€â”€ styles/                # Styles de la documentation<br>
â”‚   â”œâ”€â”€ js/                    # JavaScript modulaire docs<br>
â”‚   â””â”€â”€ content/               # Contenu des onglets<br>
â””â”€â”€ components/                # Composants rÃ©utilisables (future)
</div>

<h3 aria-label="Flux de DonnÃ©es" tabindex="0">ğŸ”„ Flux de DonnÃ©es (Clean Architecture)</h3>
<div class="architecture-diagram">
<strong>Frontend</strong> â†’ <strong>Presentation</strong> â†’ <strong>Application</strong> â†’ <strong>Domain</strong> â† <strong>Infrastructure</strong><br>
<br>
ğŸ“± <strong>Client HTTP Request</strong><br>
    â”‚<br>
    â–¼<br>
ğŸŒ <strong>Presentation Layer</strong> (Controllers, Routes, Middleware)<br>
    â”‚ â€¢ Validation des donnÃ©es<br>
    â”‚ â€¢ SÃ©rialisation/DÃ©sÃ©rialisation<br>
    â”‚ â€¢ Gestion des erreurs HTTP<br>
    â–¼<br>
ğŸ§  <strong>Application Layer</strong> (Use Cases, Services)<br>
    â”‚ â€¢ Orchestration de la logique mÃ©tier<br>
    â”‚ â€¢ Coordination des services<br>
    â”‚ â€¢ Transformation des DTO<br>
    â–¼<br>
ğŸ¯ <strong>Domain Layer</strong> (Entities, Value Objects)<br>
    â”‚ â€¢ RÃ¨gles mÃ©tier pures<br>
    â”‚ â€¢ Validation mÃ©tier<br>
    â”‚ â€¢ Logique indÃ©pendante<br>
    â–¼<br>
ğŸ”§ <strong>Infrastructure Layer</strong> (Database, OAuth, Services)<br>
    â”‚ â€¢ Persistance des donnÃ©es<br>
    â”‚ â€¢ Services externes (OAuth)<br>
    â”‚ â€¢ ImplÃ©mentations techniques
</div>

<div class="component-card">
    <h4>ğŸš€ DÃ©pendances et Inversion de ContrÃ´le</h4>
    <p><strong>RÃ¨gle d'or</strong> : Les couches internes (Domain) ne dÃ©pendent jamais des couches externes (Infrastructure).</p>
    <ul>
        <li><strong>Domain</strong> : Aucune dÃ©pendance externe</li>
        <li><strong>Application</strong> : DÃ©pend uniquement du Domain</li>
        <li><strong>Infrastructure</strong> : ImplÃ©mente les interfaces du Domain</li>
        <li><strong>Presentation</strong> : Orchestre Application et Infrastructure</li>
    </ul>
</div>

<h3 aria-label="ContrÃ´leurs et Routing" tabindex="0">ğŸ§© ContrÃ´leurs et Routing</h3>
<p>
<strong>SuperOAuth</strong> propose trois controllers complÃ©mentaires pour couvrir tous les usages d'authentification&nbsp;:
</p>
<ul>
  <li>
    <strong>AuthController</strong> <em>(classique)</em>&nbsp;: GÃ¨re lâ€™inscription, la connexion, le refresh et le logout par email/mot de passe. Indispensable pour les utilisateurs sans provider OAuth, ou pour lier un provider Ã  un compte existant.
  </li>
  <li>
    <strong>OAuthController</strong>&nbsp;: GÃ¨re tout le flux OAuth (initiation, callback, gestion des comptes liÃ©s, unlink, etc.) avec redirections automatiques et sÃ©curitÃ© renforcÃ©e.
  </li>
  <li>
    <strong>AuthController Simple</strong> <em>(auth.controller.simple.ts)</em>&nbsp;: Version minimaliste, tout en JSON, sans redirection. IdÃ©al pour API REST pure, tests automatisÃ©s, ou intÃ©grations front custom (SPA/mobile).
  </li>
</ul>
<p>
<strong>Comparatif des controllers&nbsp;:</strong>
</p>
<table class="script-table">
  <thead>
    <tr>
      <th>Controller</th>
      <th>Auth classique</th>
      <th>OAuth (init/callback)</th>
      <th>RÃ©ponse</th>
      <th>Redirection</th>
      <th>Usage principal</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>auth.controller.simple.ts</strong></td>
      <td>âœ…</td>
      <td>âœ…</td>
      <td>JSON</td>
      <td>âŒ</td>
      <td>API pure, tests, front custom</td>
    </tr>
    <tr>
      <td><strong>auth.controller.ts</strong></td>
      <td>âœ…</td>
      <td>(parfois, Ã  Ã©viter)</td>
      <td>JSON</td>
      <td>âŒ</td>
      <td>Auth classique, prod</td>
    </tr>
    <tr>
      <td><strong>oauth.controller.ts</strong></td>
      <td>âŒ</td>
      <td>âœ…</td>
      <td>Redirection/JSON</td>
      <td>âœ…</td>
      <td>OAuth web, UX fluide, prod</td>
    </tr>
  </tbody>
</table>
<p>
<strong>Routes principales&nbsp;:</strong>
</p>
<ul>
  <li><code>/api/v1/auth/*</code> â†’ Auth classique (register, login, refresh, logout)</li>
  <li><code>/api/v1/oauth/*</code> â†’ Flux OAuth complet (init, callback, gestion des providers, comptes liÃ©s)</li>
</ul>
<p>
Le routing principal (<code>main.ts</code>) monte ces routes sur des espaces dÃ©diÃ©s, garantissant lâ€™absence de conflit et une architecture claire et Ã©volutive.
</p>
<div class="feature-grid">
    <div class="feature-card">
        <div class="feature-icon">ğŸ¯</div>
        <h4>SÃ©paration des responsabilitÃ©s</h4>
        <p>Chaque module a une responsabilitÃ© claire et bien dÃ©finie.</p>
    </div>
    
    <div class="feature-card">
        <div class="feature-icon">ğŸ”—</div>
        <h4>Faible couplage</h4>
        <p>Les modules sont indÃ©pendants et communiquent via des interfaces.</p>
    </div>
    
    <div class="feature-card">
        <div class="feature-icon">ğŸª</div>
        <h4>Haute cohÃ©sion</h4>
        <p>Les Ã©lÃ©ments de chaque module travaillent ensemble vers un objectif commun.</p>
    </div>
    
    <div class="feature-card">
        <div class="feature-icon">ğŸš€</div>
        <h4>Performance</h4>
        <p>Chargement modulaire et optimisÃ© pour de meilleures performances.</p>
    </div>
    
    <div class="feature-card">
        <div class="feature-icon">ğŸ§ª</div>
        <h4>TestabilitÃ©</h4>
        <p>Chaque module peut Ãªtre testÃ© individuellement.</p>
    </div>
    
    <div class="feature-card">
        <div class="feature-icon">ğŸ“¦</div>
        <h4>RÃ©utilisabilitÃ©</h4>
        <p>Composants rÃ©utilisables dans d'autres projets.</p>
    </div>
</div>

<h3 aria-label="Avantages de l'architecture modulaire" tabindex="0">ğŸ“¦ Avantages de l'architecture modulaire</h3>
<div class="component-card">
    <h4>âœ… MaintenabilitÃ©</h4>
    <p>Code organisÃ© et documentÃ©, facile Ã  maintenir et dÃ©boguer.</p>
</div>

<div class="component-card">
    <h4>âœ… Ã‰volutivitÃ©</h4>
    <p>Ajout facile de nouvelles fonctionnalitÃ©s sans affecter l'existant.</p>
</div>

<div class="component-card">
    <h4>âœ… Collaboration d'Ã©quipe</h4>
    <p>Plusieurs dÃ©veloppeurs peuvent travailler simultanÃ©ment sur diffÃ©rents modules.</p>
</div>

<div class="component-card">
    <h4>âœ… Performance optimisÃ©e</h4>
    <p>Chargement uniquement des modules nÃ©cessaires, rÃ©duction du bundle.</p>
</div>
